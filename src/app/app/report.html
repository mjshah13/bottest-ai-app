<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generate PDF</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans+Arabic:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Outfit:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Press+Start+2P&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <style>
    body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        /* background-color: #f4f6f8; */
    }
    .container {
        max-width: 1440px;
        width: 80%;
        margin: auto;
        padding-top: 4rem;
        padding-bottom: 3rem;
    }
    .header {
        flex-direction: column;
        display: flex;
        align-items: flex-start;
        padding-bottom: 20px;
    }
    .header img {
        margin-bottom: 1.6rem;
        /* height: 50px; */
        /* margin-right: 20px; */
    }
    .header h1 {
        font-size: 38px;
        margin: 0;
        color: #212427;
        font-weight: 600;
    }
    .header .small-text{
        font-size: 23px;
        font-weight: 600;
        color: #388AEB;
        align-items: center;
    }
    .header h2 {
        color: #7c8897;
        margin: 5px 0 0 0;
        font-size: 23px;
        font-weight: 600;


    }
    
    .section {
        margin: 20px 0;
    }
    .section h2 {
        font-size: 30px;
        color: #314F8F;
        background-color: #D6E6F7;
        height: 78px;
        font-weight: 600;
        border-radius: 8px;
        display: flex;
        align-items: center;
        padding-left: 1.4rem;
        margin-top:4.5rem;
    }
    .content p {
        font-size: 16px;
        font-weight: 500;
        line-height: 24px;
        color: #212427;
        padding-bottom: 0.4rem;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    table th, table td {
        padding: 10px;
        text-align: left;
        border: 1px solid #e0e0e0;
        font-size: 14px;
        color: #212427;
        font-weight: 400;
    }
    table th {
        background-color: #FDFCFA;
       font-weight: 600;
       color: #000000;
       white-space: nowrap;
       
    }
    .chart-container {
        display: flex;
        justify-content: space-between;
        margin: 20px 0;
    }
    .chart {
        width: 48%;
    }
    .highlight {
        color: #50b35f;
        font-weight: 600;
    }
    .highlight-red {
        color: #d9534f;
        font-weight: 600;
    }
    .highlight-yellow {
        color: #f0ad4e;
        font-weight: 600;
    }
    .bg-light {
        border-radius: 8px;
        border: 1px solid #f0f0f0;
    }
    .chart-heading{
        height: 68px;
        display: flex;
        align-items: center;
        margin: 0;
        padding: 0;
        padding-left: 1rem;
        border-bottom: 1px solid #f0f0f0;
        font-size: 20px;
        font-weight: 600;
        color: #212427;
    }
    .title {
        font-size: 24px;
        margin: 0;
        color: #3b4a60;
    }
    .subtitle {
        font-size: 14px;
        color: #7c8897;
        margin: 5px 0 0 0;
    }
    .list{
        padding: 0;
        padding-left: 1.3rem;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;

    }
    .list-item{
        color: #212427;
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
    }
    .highlight-blue{
        color: #314F8F;
    }
    .link-text{
        color: #212427;
    }
    .highlight-dark{
        font-weight: 600;
    }
    #barchart{
        padding: 1rem;
    }
    #barchart2{
        padding: 1rem;
    }
    #piechart1,#piechart2{
        padding:1rem;
    }
   .content-text{
     padding-top: 1rem;
     margin-bottom: 2rem;
     background-color: red;
   }
   .list-pt{
    padding: 0;
    padding-left: 1rem;
    padding-top:2rem;
    padding-bottom: 1rem;
    
   }
</style>
</head>
<body>

  <div id="content">
    <div class="container">
        <div class="header">
            <div>
                <img src="../../../public/Assets/Logo.svg" alt="Logo">

            </div>
            <div>
                <h1 class="title">Feature Suite Run <span class="small-text">(Executed on 2 Feb 2024, 10:32 AM PST)</span></h1>  
                <h2 class="subtitle">Comparison Suite Run: 21 Jan 2024, 12:46 PM PST</h2>
            </div>
        </div>

        <div class="section content">
            <p>The following Tests were executed and evaluated in the Suite Run:</p>
            <table>
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Success Criteria</th>
                        <th>Baselines</th>
                        <th>Variants</th>
                        <th>Iterations</th>
                        <th>Evaluations</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Sales By Product Analysis</td>
                        <td>Default</td>
                        <td>1</td>
                        <td>3</td>
                        <td>2</td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td>Example Test 2</td>
                        <td>Default</td>
                        <td>2</td>
                        <td>2</td>
                        <td>2</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>Example Test 3</td>
                        <td>Default</td>
                        <td>2</td>
                        <td>3</td>
                        <td>3</td>
                        <td>8</td>
                    </tr>
                    <tr>
                        <td>Custom Test</td>
                        <td>Custom</td>
                        <td>4</td>
                        <td>2</td>
                        <td>4</td>
                        <td>8</td>
                    </tr>
                    <tr>
                        <td>A Product Test</td>
                        <td>Custom</td>
                        <td>3</td>
                        <td>1</td>
                        <td>1</td>
                        <td>1</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Overview of Results</h2>
            <p class="content">
                <ul class="list">
                    <li class="list-item">A total of 30 Tests, 50 Variants, and 110 Evaluations were included in this Suite run.</li>
                    <li class="list-item"><span class="highlight">87% of Tests passed</span>  fully (with no failures), <span class="highlight">up 4%</span> the <span class="highlight-blue">26 Jan 2024 Production Run.</span> </li>

                </ul>
            </p>
            
            <div class="chart-container">
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Number Of Tests</h3>
                        <div id="piechart1">

                        </div>
                      
                    </div>
                </div>
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Comparison</h3>
                        <div id="piechart2">
                        </div>
                       
                    </div>
                </div>
            </div>
            
                <ul class="list-pt">
                    <li class="list-item">Out of the <span class="highlight-dark">110</span> Evaluations performed, <span class="highlight">90 Evaluations (82%) passed, up 1%</span> from the <span class="highlight-blue">26 Jan 2024 Production Run.</span> </li>

                </ul>
              
            <div class="chart-container">
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Number Of Evaluations</h3>
                        <div id="piechart3">

                        </div>
                      
                    </div>
                </div>
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Comparison</h3>
                        <div id="piechart4">
                        </div>
                       
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Improvements</h2>
            <p class="content">
                <ul class="list">
                    <li class="list-item">The following Tests saw a <span class="highlight">higher pass rate</span> as compared to the <span class="highlight-blue">26 Jan 2024 Production Run:</span> </li>

                </ul>
                
            </p>
            <table>
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Pass Rate</th>
                        <th>Comparison Pass Rate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Sales By Product Analysis</td>
                        <td>50%</td>
                        <td>0%</td>
                    </tr>
                    <tr>
                        <td>User Journey Report</td>
                        <td>25%</td>
                        <td>20%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Test Failure Details</h2>
            <p class="content">
                <ul class="list">
                    <li class="list-item">
                The following <span class="highlight-red">failures</span> or <span class="highlight-yellow">mixed results</span> occurred during the Suite run:

                    </li>
                </ul>
            </p>
            <table>
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Pass Rate</th>
                        <th>Failure Summary</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Sales By Product Analysis</td>
                        <td>50%</td>
                        <td>The response did not include the expected link to the Sales by Product report. <a href="#" class="link-text">(See Test Run)</a></td>
                    </tr>
                    <tr>
                        <td>User Journey Report</td>
                        <td>25%</td>
                        <td>The response was not as detailed as the baseline. <a href="#" class="link-text">(See Test Run)</a></td>
                    </tr>
                    <tr>
                        <td>CRM Dashboard</td>
                        <td>25%</td>
                        <td>The response's tone was not as polite as the baseline. <a href="#" class="link-text">(See Test Run)</a></td>
                    </tr>
                    <tr>
                        <td>Example Test</td>
                        <td>0%</td>
                        <td>The response did not answer the question. This is also an example of a failure summary that might expand to multiple lines. <a href="#" class="link-text">(See Test Run)</a></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Performance</h2>
            <p class="content">
                <ul class="list">
                    <li class="list-item">
                The average Test completion time was <span class="highlight-dark">50.6</span>  seconds, which is <span class="highlight">13% faster</span> as compared to the <span class="highlight-blue">26 Jan 2024 Production Run.</span> 
                    </li>

                </ul>
            </p>
            <div class="chart-container">
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Performance Distribution</h3>
                        <div id="barchart">

                        </div>
                      
                    </div>
                </div>
                <div class="chart">
                    <div class="bg-light">
                        <h3 class="chart-heading">Comparison</h3>
                        <div id="barchart2">
                        </div>
                       
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Slower Tests</h2>
            <p class="content">
                <ul class="list">
                    <li class="list-item">
                The following Tests had an average run time that was <span class="highlight-red">>10% slower</span> compared to the <span class="highlight-blue">26 Jan 2024 Production Run:</span> 

                    </li>

                </ul>
            </p>
            <table>
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Average Run Time</th>
                        <th>Comparison Average Run Time</th>
                        <th>% Slower</th>
                        <th>Min Run Time</th>
                        <th>Max Run Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Open a Support Ticket</td>
                        <td>44.1 sec</td>
                        <td>28.2 sec</td>
                        <td>25%</td>
                        <td>28.2 sec</td>
                        <td>43.1 sec</td>
                    </tr>
                    <tr>
                        <td>Example Test Name</td>
                        <td>12.3 sec</td>
                        <td>12.4 sec</td>
                        <td>2%</td>
                        <td>2.1 sec</td>
                        <td>24.1 sec</td>
                    </tr>
                    <tr>
                        <td>Another Test Right Here</td>
                        <td>13.0 sec</td>
                        <td>28.2 sec</td>
                        <td>71%</td>
                        <td>3.1 sec</td>
                        <td>23.1 sec</td>
                    </tr>
                    <tr>
                        <td>The Last Test in this List</td>
                        <td>51.5 sec</td>
                        <td>28.2 sec</td>
                        <td>12%</td>
                        <td>31 sec</td>
                        <td>92 sec</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
  </div>
  <button onclick="generatePDF()">Generate PDF</button>

  <script>
   async function generatePDF() {
    console.log("Generating PDF...");
    const content = document.getElementById('content');

    // Use html2canvas to convert the content to a canvas
    const canvas = await html2canvas(content);

    // Convert the canvas to an image (data URL)
    const imgData = canvas.toDataURL('image/png');
    console.log(imgData);

    // Create a new jsPDF instance
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('p', 'pt', '');
      const height = window.document;
    const desiredHeight = 3631; // Adjust this value as needed (in points)
doc.internal.pageSize.setHeight(desiredHeight);
    // Calculate the dimensions of the PDF page and adjust for content height
    const pdfWidth = doc.internal.pageSize.getWidth();
    console.log((canvas.height * pdfWidth) / canvas.width)

    const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

    // Add the image to the PDF
    doc.addImage(imgData, 'PNG', 0, 0, pdfWidth, desiredHeight);

    // Save the generated PDF
    doc.save('sample.pdf');
}
    var options = {
    
        chart: {
      type: "bar",
      height: 350,
      toolbar: {
        show: false,
      },
    },
    series: [{
      name: 'Number of Executions',
      data: [2, 1, 15, 30, 25, 10, 5, 2]
    }],
    plotOptions: {
      bar: {
        horizontal: true,
        barHeight: "40%", 
        borderRadius: 10,
        borderRadiusApplication: "end",
      },
    },
    dataLabels: {
      enabled: false,
    },
    xaxis: {
      categories: ['< 20', '20-25', '25-30', '30-35', '35-40', '45-50', '55-60', '> 60'],
      title: {
        text: "Number of Tests",
        offsetY: 10,
        style: {
          fontWeight: 400,
          color: "#909193",
          fontSize: "16px",
          fontFamily: "poppins",
        },
      },

      labels: {
        style: {
          colors: "#212427",
          fontSize: "12px",
          fontFamily: "Poppins",
          fontWeight: 600,
        },
      },
      tickAmount: 3,
    },
    tooltip: {
      enabled: true,
      y: {
        formatter: (val, opts) => {
          return `Number of test : ${val} `;
        },
      },
      style: {
        fontFamily: "poppins",
      },
    },
    yaxis: {
      title: {
        text: "Executions Time (Seconds)",
        offsetX: 15,
        style: {
          fontWeight: 400,
          color: "#909193",
          fontSize: "16px",
          fontFamily: "poppins",
        },
      },
      labels: {
        style: {
          colors: "#212427",
          fontSize: "12px",
          fontFamily: "Poppins",
          fontWeight: 600,
        },
      },
      reversed: false,
      axisTicks: {
        show: true,
      },
    },
    grid: {
      xaxis: {
        lines: {
          show: true,
        },
      },
      yaxis: {
        lines: {
          show: false,
        },
      },
    },
  
 
  }

  var chart = new ApexCharts(document.querySelector("#barchart"), options);
  var chart2= new ApexCharts(document.querySelector("#barchart2"), options);
  let series =  [60, 20, 20]
  
  chart.render();
  chart2.render();

  const donutOption = {
  chart: {
    type: "donut",
    height: 350,
  },
  series: series,
  labels: ['Passed', 'Mixed Results', 'Failed'],
  colors: [
    "#54CA6E",
    "#E7C200",
    "#E1654A"
  ],
  plotOptions: {
    pie: {
      donut: {
        labels: {
          show: true,
          name: {
            show: true,
            fontSize: "24px",
            fontWeight: 600,
            offsetY: 10,
          },
          value: {
            show: false,
          },
        total: {
              show: true,
              label: `${series?.reduce(
                (accumulator, currentValue) => accumulator + currentValue,
                0
              )} Test`,
              fontSize: "24px",
              fontWeight: 600,
              fontFamily: "Poppins",
              color: "#909193",
            },
        },
      },
    },
  },
  tooltip: {
    enabled: true,
    style: {
      fontFamily: "Poppins",
    },
  },
  legend: {
    position: "right",
    offsetY: 50,
    fontSize: "16px",
    fontWeight: "400",
    fontFamily: "Poppins",
    labels: {
      colors: "#212427",
      useSeriesColors: false,
    },
    markers: {
      width: 10,
      height: 10,
      radius: 5,
    },
    formatter: function (seriesName, opts) {
      return `${seriesName} - ${opts.w.globals.series[opts.seriesIndex]}`;
    },
  },
  dataLabels: {
    enabled: true,
    formatter: function (val) {
      return `${val.toFixed(1)}%`;
    },
  },
};

var chart1 = new ApexCharts(document.querySelector("#piechart1"), donutOption);
var chart2 = new ApexCharts(document.querySelector("#piechart2"), donutOption);
var chart3 = new ApexCharts(document.querySelector("#piechart3"), donutOption);
var chart4 = new ApexCharts(document.querySelector("#piechart4"), donutOption);

chart1.render();
chart2.render();
chart3.render();
chart4.render();
 
const reportData = {
    suite_run_id: "srn_Swh8zDqsfUOFtoFeIL1MbjyAJFJ59",
    suite_run_timestamp: "2024-05-17T21:52:01.493702",
    comparison_run_id: "srn_tpozdSE3jwJSmfGIYTunXfh5zynQd",
    comparison_run_timestamp: "2024-05-17T21:51:32.380930",
    suite_name: "Feature",
    tests: [
        {
            test_id: "tst_q8fOmJgEK2PBBZ8zGSZD2ivEQTuIb",
            test_name: "Environmental Impact Query",
            use_default_success_criteria: false,
            baseline_count: 1,
            variant_count: 2,
            iteration_count: 3,
            evaluation_count: 6
        },
        {
            test_id: "tst_zlrGwbuSMyCVIyNTgtMdUViRsJUZx",
            test_name: "Order Status Update",
            use_default_success_criteria: true,
            baseline_count: 1,
            variant_count: 2,
            iteration_count: 3,
            evaluation_count: 6
        },
        {
            test_id: "tst_f11Lvigpq0M8QCCuPoSmMizmnkWwU",
            test_name: "Subscription Query",
            use_default_success_criteria: true,
            baseline_count: 1,
            variant_count: 2,
            iteration_count: 3,
            evaluation_count: 6
        },
        {
            test_id: "tst_R9Fl9J9r8S028fddjCPoFinELLkVP",
            test_name: "Feature Request",
            use_default_success_criteria: false,
            baseline_count: 1,
            variant_count: 2,
            iteration_count: 3,
            evaluation_count: 6
        },
        {
            test_id: "tst_GAAxJDUxYVEb8kXw9I5xzl6G2bIyA",
            test_name: "Lost Item Inquiry",
            use_default_success_criteria: false,
            baseline_count: 1,
            variant_count: 2,
            iteration_count: 3,
            evaluation_count: 6
        }
    ],
    overview: {
        total_test_count: 5,
        total_variant_count: 10,
        total_evaluation_count: 30,
        test_pass_rate: 0.4,
        comparison_test_pass_rate: 0.4666666666666666,
        delta_test_pass_rate: -0.0666666666666666,
        evaluation_pass_rate: 0.4,
        comparison_evaluation_pass_rate: 0.4666666666666667,
        delta_evaluation_pass_rate: -0.06666666666666665,
        run_statuses: [
            "Running",
            "Pass",
            "Mixed",
            "Fail",
            "Stopped",
            "Error",
            "Skipped"
        ],
        test_status_counts: [
            0,
            1,
            2,
            2,
            0,
            0,
            0
        ],
        comparison_test_status_counts: [
            0,
            1,
            2,
            2,
            0,
            0,
            0
        ],
        evaluation_status_counts: [
            0,
            12,
            0,
            18,
            0,
            0,
            0
        ],
        comparison_evaluation_status_counts: [
            0,
            14,
            0,
            16,
            0,
            0,
            0
        ]
    },
    improvements: {
        test_improvements: []
    },
    failures: {
        test_failures: [
            {
                test_id: "tst_zlrGwbuSMyCVIyNTgtMdUViRsJUZx",
                test_name: "Order Status Update",
                pass_rate: 0.5,
                failure_summary: "stubbed_failure_reason",
                test_run_id: "trn_K46yMIK9RYoganfRJmp5bRD8IZWrI"
            },
            {
                test_id: "tst_f11Lvigpq0M8QCCuPoSmMizmnkWwU",
                test_name: "Subscription Query",
                pass_rate: 0.5,
                failure_summary: "stubbed_failure_reason",
                test_run_id: "trn_zW7UIaAuQsITt7mMEkG3tJMGFr9C7"
            },
            {
                test_id: "tst_R9Fl9J9r8S028fddjCPoFinELLkVP",
                test_name: "Feature Request",
                pass_rate: 0.0,
                failure_summary: "stubbed_failure_reason",
                test_run_id: "trn_GLghpNccYCJAMmfiaIV4ZNUMM0lTQ"
            },
            {
                test_id: "tst_GAAxJDUxYVEb8kXw9I5xzl6G2bIyA",
                test_name: "Lost Item Inquiry",
                pass_rate: 0.0,
                failure_summary: "stubbed_failure_reason",
                test_run_id: "trn_6UBTkOZKRJKycFGGtYGgPvTQ1CG8d"
            }
        ]
    },
    performance: {
        average_run_time: 213.59399999999997,
        comparison_average_run_time: 231.13900000000004,
        improvement_rate: 0.07590670548890524,
        buckets: [
            "<60",
            "60 - 110",
            "110 - 160",
            "160 - 210",
            "210 - 260",
            "260 - 310",
            "310 - 360",
            "360 - 410",
            "410 - 460",
            "460+"
        ],
        values: [
            5,
            3,
            1,
            6,
            4,
            1,
            3,
            3,
            3,
            0
        ],
        comparison_values: [
            3,
            3,
            4,
            1,
            6,
            6,
            3,
            0,
            1,
            3
        ],
        test_performances: [
            {
                test_id: "tst_q8fOmJgEK2PBBZ8zGSZD2ivEQTuIb",
                test_name: "Environmental Impact Query",
                average_run_time: 250.92666666666668,
                comparison_average_run_time: 178.555,
                percent_slower: 0.4053186226466168,
                min_run_time: 48.66,
                max_run_time: 401.63
            }
        ]
    }


}
  </script>
</body>
</html> -->

